// Generated by CIRCT firtool-1.62.1
// Standard header to adapt well known macros for register randomization.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_MEM_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_MEM_INIT
`endif // not def RANDOMIZE
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

module HPTW(
  input         clock,
  input         reset,
  input         io_sfence_valid,
  input         io_csr_satp_changed,
  input         io_csr_vsatp_changed,
  input  [3:0]  io_csr_hgatp_mode,
  input  [15:0] io_csr_hgatp_vmid,
  input  [43:0] io_csr_hgatp_ppn,
  input         io_csr_hgatp_changed,
  input         io_csr_mbmc_BME,
  input         io_csr_mbmc_CMODE,
  input         io_csr_priv_virt_changed,
  input         io_csr_mPBMTE,
  output        io_req_ready,
  input         io_req_valid,
  input  [1:0]  io_req_bits_source,
  input  [2:0]  io_req_bits_id,
  input  [37:0] io_req_bits_gvpn,
  input  [35:0] io_req_bits_ppn,
  input         io_req_bits_l3Hit,
  input         io_req_bits_l2Hit,
  input         io_req_bits_l1Hit,
  input         io_req_bits_bypassed,
  input         io_req_bits_bitmapCheck_jmp_bitmap_check,
  input  [63:0] io_req_bits_bitmapCheck_pte,
  input  [63:0] io_req_bits_bitmapCheck_ptes_0,
  input  [63:0] io_req_bits_bitmapCheck_ptes_1,
  input  [63:0] io_req_bits_bitmapCheck_ptes_2,
  input  [63:0] io_req_bits_bitmapCheck_ptes_3,
  input  [63:0] io_req_bits_bitmapCheck_ptes_4,
  input  [63:0] io_req_bits_bitmapCheck_ptes_5,
  input  [63:0] io_req_bits_bitmapCheck_ptes_6,
  input  [63:0] io_req_bits_bitmapCheck_ptes_7,
  input  [3:0]  io_req_bits_bitmapCheck_hitway,
  input         io_req_bits_bitmapCheck_fromSP,
  input  [1:0]  io_req_bits_bitmapCheck_SPlevel,
  input         io_resp_ready,
  output        io_resp_valid,
  output [37:0] io_resp_bits_resp_entry_tag,
  output [13:0] io_resp_bits_resp_entry_vmid,
  output        io_resp_bits_resp_entry_n,
  output [1:0]  io_resp_bits_resp_entry_pbmt,
  output [37:0] io_resp_bits_resp_entry_ppn,
  output        io_resp_bits_resp_entry_perm_d,
  output        io_resp_bits_resp_entry_perm_a,
  output        io_resp_bits_resp_entry_perm_g,
  output        io_resp_bits_resp_entry_perm_u,
  output        io_resp_bits_resp_entry_perm_x,
  output        io_resp_bits_resp_entry_perm_w,
  output        io_resp_bits_resp_entry_perm_r,
  output [1:0]  io_resp_bits_resp_entry_level,
  output        io_resp_bits_resp_gpf,
  output        io_resp_bits_resp_gaf,
  output [3:0]  io_resp_bits_id,
  input         io_mem_req_ready,
  output        io_mem_req_valid,
  output [47:0] io_mem_req_bits_addr,
  output        io_mem_req_bits_hptw_bypassed,
  input         io_mem_resp_valid,
  input  [63:0] io_mem_resp_bits,
  input         io_mem_mask,
  output [37:0] io_refill_req_info_vpn,
  output [1:0]  io_refill_req_info_source,
  output [1:0]  io_refill_level,
  output [47:0] io_pmp_req_bits_addr,
  input         io_pmp_resp_ld,
  input         io_pmp_resp_mmio,
  input         io_bitmap_req_ready,
  output        io_bitmap_req_valid,
  output [35:0] io_bitmap_req_bits_bmppn,
  output [37:0] io_bitmap_req_bits_vpn,
  output [1:0]  io_bitmap_req_bits_level,
  output [3:0]  io_bitmap_req_bits_way_info,
  output        io_bitmap_req_bits_hptw_bypassed,
  output        io_bitmap_req_bits_n,
  output        io_bitmap_resp_ready,
  input         io_bitmap_resp_valid,
  input         io_bitmap_resp_bits_cf,
  input  [3:0]  io_l0_way_info
);

  wire             finish;
  reg              idle;
  wire [35:0]      _GEN;
  wire             flush =
    io_sfence_valid | io_csr_hgatp_changed | io_csr_satp_changed | io_csr_vsatp_changed
    | io_csr_priv_virt_changed;
  wire             bitmap_enable = io_csr_mbmc_BME & ~io_csr_mbmc_CMODE;
  reg  [1:0]       level;
  reg  [1:0]       af_level;
  reg  [49:0]      gpaddr;
  reg  [35:0]      req_ppn;
  reg              l3Hit;
  reg              l2Hit;
  reg              l1Hit;
  reg              bypassed;
  wire             _cache_level_T = idle & io_req_valid;
  reg              jmp_bitmap_check;
  reg              fromSP;
  reg              cache_pte_n;
  reg  [1:0]       cache_pte_pbmt;
  reg  [6:0]       cache_pte_reserved;
  reg  [7:0]       cache_pte_ppn_high;
  reg  [35:0]      cache_pte_ppn;
  reg              cache_pte_perm_d;
  reg              cache_pte_perm_a;
  reg              cache_pte_perm_g;
  reg              cache_pte_perm_u;
  reg              cache_pte_perm_x;
  reg              cache_pte_perm_w;
  reg              cache_pte_perm_r;
  reg              cache_pte_perm_v;
  wire             pte_n = jmp_bitmap_check ? cache_pte_n : io_mem_resp_bits[63];
  wire [1:0]       pte_pbmt = jmp_bitmap_check ? cache_pte_pbmt : io_mem_resp_bits[62:61];
  wire [7:0]       pte_ppn_high =
    jmp_bitmap_check ? cache_pte_ppn_high : io_mem_resp_bits[53:46];
  wire [35:0]      pte_ppn = jmp_bitmap_check ? cache_pte_ppn : io_mem_resp_bits[45:10];
  wire             pte_perm_d = jmp_bitmap_check ? cache_pte_perm_d : io_mem_resp_bits[7];
  wire             pte_perm_a = jmp_bitmap_check ? cache_pte_perm_a : io_mem_resp_bits[6];
  wire             pte_perm_u = jmp_bitmap_check ? cache_pte_perm_u : io_mem_resp_bits[4];
  wire             pte_perm_x = jmp_bitmap_check ? cache_pte_perm_x : io_mem_resp_bits[3];
  wire             pte_perm_w = jmp_bitmap_check ? cache_pte_perm_w : io_mem_resp_bits[2];
  wire             pte_perm_r = jmp_bitmap_check ? cache_pte_perm_r : io_mem_resp_bits[1];
  wire             pte_perm_v = jmp_bitmap_check ? cache_pte_perm_v : io_mem_resp_bits[0];
  wire [3:0][8:0]  _GEN_0 =
    {{gpaddr[47:39]}, {gpaddr[38:30]}, {gpaddr[29:21]}, {gpaddr[20:12]}};
  wire             _GEN_1 = io_csr_hgatp_mode == 4'h9;
  wire [47:0]      _GEN_2 = {io_csr_hgatp_ppn[35:0], 12'h0};
  assign _GEN =
    (_GEN_1
       ? (af_level == 2'h2 ? l3Hit : af_level == 2'h1 ? l2Hit : l1Hit)
       : af_level == 2'h1 ? l2Hit : l1Hit)
      ? req_ppn
      : pte_ppn;
  wire [47:0]      mem_addr =
    (_GEN_1 ? (&af_level) : af_level == 2'h2)
      ? (_GEN_1
           ? 48'(_GEN_2 + {34'h0, gpaddr[49:39], 3'h0})
           : 48'(_GEN_2 + {34'h0, gpaddr[40:30], 3'h0}))
      : {_GEN, _GEN_0[level], 3'h0};
  reg              s_pmp_check;
  reg              s_mem_req;
  reg              w_mem_resp;
  reg              mem_addr_update;
  reg              s_bitmap_check;
  reg              w_bitmap_resp;
  reg              whether_need_bitmap_check;
  reg              bitmap_checkfailed;
  wire             sent_to_pmp = ~idle & (~s_pmp_check | mem_addr_update) & ~finish;
  wire             _pageFault_T_19 = pte_perm_r | pte_perm_x;
  wire             _find_pte_T = pte_perm_r | pte_perm_x;
  wire             pageFault =
    (|(jmp_bitmap_check ? cache_pte_reserved : io_mem_resp_bits[60:54])) | (&pte_pbmt)
    | ~io_csr_mPBMTE & (|pte_pbmt)
    | (~(_pageFault_T_19 | pte_perm_w) & pte_perm_v
         ? pte_perm_u | pte_perm_a | pte_perm_d | pte_n | (|pte_pbmt)
         : ~pte_perm_v | ~pte_perm_r & pte_perm_w | ~pte_perm_u | pte_n
           & pte_ppn[3:0] != 4'h8 | (_pageFault_T_19 | pte_perm_w) & pte_perm_v
           & ~(~(|level) | level == 2'h1 & pte_ppn[8:0] == 9'h0 | level == 2'h2
               & pte_ppn[17:0] == 18'h0 | (&level) & pte_ppn[26:0] == 27'h0)
           | ~pte_perm_a) | ~((_find_pte_T | pte_perm_w) & pte_perm_v) & ~(|level);
  reg              accessFault;
  wire             ppn_af =
    bitmap_enable
      ? (|pte_ppn_high) & pte_perm_v | bitmap_checkfailed
      : (|pte_ppn_high) & pte_perm_v;
  wire             find_pte =
    (_find_pte_T | pte_perm_w) & pte_perm_v | ppn_af | pageFault;
  wire             resp_valid =
    ~idle & mem_addr_update & (w_mem_resp & find_pte | s_pmp_check & accessFault);
  reg  [2:0]       id;
  reg  [1:0]       source;
  wire             resp_gaf = accessFault | ppn_af & ~pageFault;
  wire [1:0]       resp_entry_level = accessFault ? af_level : level;
  wire [35:0]      resp_pte_ppn = resp_gaf ? 36'h0 : pte_ppn;
  reg              way_info_REG;
  reg  [3:0]       way_info_r;
  reg  [3:0]       cache_hitway;
  reg  [1:0]       cache_level;
  wire             io_mem_req_valid_0 =
    ~s_mem_req & ~io_mem_mask & ~accessFault & s_pmp_check;
  wire             _GEN_3 = io_req_bits_bitmapCheck_jmp_bitmap_check & _cache_level_T;
  wire             _GEN_4 = _cache_level_T & ~io_req_bits_bitmapCheck_jmp_bitmap_check;
  wire             _GEN_5 = idle & _GEN_4;
  wire             _GEN_6 = idle & (_GEN_4 | _GEN_3);
  wire             _GEN_7 = find_pte | accessFault;
  wire             _GEN_8 = io_resp_ready & resp_valid;
  assign finish = mem_addr_update & _GEN_7 & resp_valid;
  wire [1:0]       _GEN_9 =
    io_req_bits_l1Hit
      ? 2'h0
      : io_req_bits_l2Hit ? 2'h1 : _GEN_1 ? {1'h1, ~io_req_bits_l3Hit} : 2'h2;
  wire             _GEN_10 = sent_to_pmp & ~mem_addr_update;
  wire             _GEN_11 = accessFault & ~idle;
  wire             _GEN_12 = io_mem_req_ready & io_mem_req_valid_0;
  wire             _GEN_13 = io_mem_resp_valid & ~w_mem_resp;
  wire             _GEN_14 =
    bitmap_enable & (_find_pte_T | pte_perm_w) & pte_perm_v & ~pageFault;
  wire             _GEN_15 = io_bitmap_req_ready & ~s_bitmap_check;
  wire             _GEN_16 = ~w_bitmap_resp & io_bitmap_resp_valid;
  wire             _GEN_17 = mem_addr_update & ~_GEN_7;
  wire             _GEN_18 = resp_valid & _GEN_8;
  always @(posedge clock or posedge reset) begin
    if (reset) begin
      level <= 2'h3;
      af_level <= 2'h3;
      s_pmp_check <= 1'h1;
      s_mem_req <= 1'h1;
      w_mem_resp <= 1'h1;
      idle <= 1'h1;
      mem_addr_update <= 1'h0;
      s_bitmap_check <= 1'h1;
      w_bitmap_resp <= 1'h1;
      whether_need_bitmap_check <= 1'h0;
      bitmap_checkfailed <= 1'h0;
      way_info_REG <= 1'h0;
    end
    else begin
      if (_GEN_17)
        level <= 2'(level - 2'h1);
      else if (idle) begin
        if (_GEN_4)
          level <= _GEN_9;
        else if (_GEN_3)
          level <=
            io_req_bits_bitmapCheck_fromSP ? io_req_bits_bitmapCheck_SPlevel : 2'h0;
      end
      if (_GEN_13)
        af_level <= 2'(af_level - 2'h1);
      else if (_GEN_5)
        af_level <= _GEN_9;
      s_pmp_check <= flush | _GEN_11 | _GEN_10 | ~_GEN_5 & s_pmp_check;
      s_mem_req <= flush | ~_GEN_17 & (_GEN_12 | _GEN_11 | ~_GEN_10 & s_mem_req);
      w_mem_resp <= flush | _GEN_13 | ~_GEN_12 & (_GEN_11 | w_mem_resp);
      idle <= flush | mem_addr_update & _GEN_7 & _GEN_18 | ~_GEN_6 & idle;
      mem_addr_update <=
        ~(flush | mem_addr_update & (~_GEN_7 | _GEN_18))
        & (_GEN_16 | whether_need_bitmap_check & ~_GEN_14 | _GEN_13 & ~bitmap_enable
           | _GEN_11 | mem_addr_update);
      s_bitmap_check <=
        flush | _GEN_15 | ~(whether_need_bitmap_check & _GEN_14)
        & (_GEN_11 | ~(idle & _GEN_3) & s_bitmap_check);
      w_bitmap_resp <= flush | _GEN_16 | ~_GEN_15 & (_GEN_11 | w_bitmap_resp);
      whether_need_bitmap_check <=
        ~(flush | whether_need_bitmap_check)
        & (_GEN_13 ? bitmap_enable : ~_GEN_11 & whether_need_bitmap_check);
      bitmap_checkfailed <=
        ~flush & (~mem_addr_update | ~_GEN_7 | ~_GEN_18)
        & (_GEN_16 ? io_bitmap_resp_bits_cf : ~_GEN_11 & bitmap_checkfailed);
      way_info_REG <= io_mem_resp_valid;
    end
  end // always @(posedge, posedge)
  wire [7:0][63:0] _GEN_19 =
    {{io_req_bits_bitmapCheck_ptes_7},
     {io_req_bits_bitmapCheck_ptes_6},
     {io_req_bits_bitmapCheck_ptes_5},
     {io_req_bits_bitmapCheck_ptes_4},
     {io_req_bits_bitmapCheck_ptes_3},
     {io_req_bits_bitmapCheck_ptes_2},
     {io_req_bits_bitmapCheck_ptes_1},
     {io_req_bits_bitmapCheck_ptes_0}};
  wire [63:0]      _cache_pte_WIRE_3 = _GEN_19[io_req_bits_gvpn[2:0]];
  wire             _GEN_20 =
    sent_to_pmp ? io_pmp_resp_ld | io_pmp_resp_mmio : accessFault;
  always @(posedge clock) begin
    if (idle) begin
      if (_GEN_4)
        gpaddr <= {io_req_bits_gvpn, 12'h0};
      else if (_GEN_3)
        gpaddr <= {io_req_bits_gvpn, 12'h0};
    end
    if (_GEN_5) begin
      req_ppn <= io_req_bits_ppn;
      l3Hit <= _GEN_1 & io_req_bits_l3Hit;
      l2Hit <= io_req_bits_l2Hit;
      l1Hit <= io_req_bits_l1Hit;
      bypassed <= io_req_bits_bypassed;
    end
    if (_cache_level_T) begin
      jmp_bitmap_check <= io_req_bits_bitmapCheck_jmp_bitmap_check;
      fromSP <= io_req_bits_bitmapCheck_fromSP;
      cache_pte_n <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[63]
          : _cache_pte_WIRE_3[63];
      cache_pte_pbmt <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[62:61]
          : _cache_pte_WIRE_3[62:61];
      cache_pte_reserved <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[60:54]
          : _cache_pte_WIRE_3[60:54];
      cache_pte_ppn_high <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[53:46]
          : _cache_pte_WIRE_3[53:46];
      cache_pte_ppn <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[45:10]
          : _cache_pte_WIRE_3[45:10];
      cache_pte_perm_d <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[7]
          : _cache_pte_WIRE_3[7];
      cache_pte_perm_a <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[6]
          : _cache_pte_WIRE_3[6];
      cache_pte_perm_g <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[5]
          : _cache_pte_WIRE_3[5];
      cache_pte_perm_u <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[4]
          : _cache_pte_WIRE_3[4];
      cache_pte_perm_x <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[3]
          : _cache_pte_WIRE_3[3];
      cache_pte_perm_w <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[2]
          : _cache_pte_WIRE_3[2];
      cache_pte_perm_r <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[1]
          : _cache_pte_WIRE_3[1];
      cache_pte_perm_v <=
        io_req_bits_bitmapCheck_fromSP
          ? io_req_bits_bitmapCheck_pte[0]
          : _cache_pte_WIRE_3[0];
      source <= io_req_bits_source;
      cache_hitway <= io_req_bits_bitmapCheck_hitway;
      cache_level <= io_req_bits_bitmapCheck_SPlevel;
    end
    accessFault <=
      ~flush
      & (mem_addr_update & _GEN_7 & resp_valid
           ? ~(_GEN_8 | _GEN_5) & _GEN_20
           : ~_GEN_5 & _GEN_20);
    if (_GEN_6)
      id <= io_req_bits_id;
    if (way_info_REG)
      way_info_r <= io_l0_way_info;
  end // always @(posedge)
  `ifdef ENABLE_INITIAL_REG_
    `ifdef FIRRTL_BEFORE_INITIAL
      `FIRRTL_BEFORE_INITIAL
    `endif // FIRRTL_BEFORE_INITIAL
    logic [31:0] _RANDOM[0:5];
    initial begin
      `ifdef INIT_RANDOM_PROLOG_
        `INIT_RANDOM_PROLOG_
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT
        for (logic [2:0] i = 3'h0; i < 3'h6; i += 3'h1) begin
          _RANDOM[i] = `RANDOM;
        end
        level = _RANDOM[3'h0][1:0];
        af_level = _RANDOM[3'h0][3:2];
        gpaddr = {_RANDOM[3'h0][31:4], _RANDOM[3'h1][21:0]};
        req_ppn = {_RANDOM[3'h1][31:22], _RANDOM[3'h2][25:0]};
        l3Hit = _RANDOM[3'h2][26];
        l2Hit = _RANDOM[3'h2][27];
        l1Hit = _RANDOM[3'h2][28];
        bypassed = _RANDOM[3'h2][29];
        jmp_bitmap_check = _RANDOM[3'h2][30];
        fromSP = _RANDOM[3'h2][31];
        cache_pte_n = _RANDOM[3'h3][0];
        cache_pte_pbmt = _RANDOM[3'h3][2:1];
        cache_pte_reserved = _RANDOM[3'h3][9:3];
        cache_pte_ppn_high = _RANDOM[3'h3][17:10];
        cache_pte_ppn = {_RANDOM[3'h3][31:18], _RANDOM[3'h4][21:0]};
        cache_pte_perm_d = _RANDOM[3'h4][24];
        cache_pte_perm_a = _RANDOM[3'h4][25];
        cache_pte_perm_g = _RANDOM[3'h4][26];
        cache_pte_perm_u = _RANDOM[3'h4][27];
        cache_pte_perm_x = _RANDOM[3'h4][28];
        cache_pte_perm_w = _RANDOM[3'h4][29];
        cache_pte_perm_r = _RANDOM[3'h4][30];
        cache_pte_perm_v = _RANDOM[3'h4][31];
        s_pmp_check = _RANDOM[3'h5][0];
        s_mem_req = _RANDOM[3'h5][1];
        w_mem_resp = _RANDOM[3'h5][2];
        idle = _RANDOM[3'h5][3];
        mem_addr_update = _RANDOM[3'h5][4];
        s_bitmap_check = _RANDOM[3'h5][5];
        w_bitmap_resp = _RANDOM[3'h5][6];
        whether_need_bitmap_check = _RANDOM[3'h5][7];
        bitmap_checkfailed = _RANDOM[3'h5][8];
        accessFault = _RANDOM[3'h5][9];
        id = _RANDOM[3'h5][12:10];
        source = _RANDOM[3'h5][14:13];
        way_info_REG = _RANDOM[3'h5][15];
        way_info_r = _RANDOM[3'h5][19:16];
        cache_hitway = _RANDOM[3'h5][23:20];
        cache_level = _RANDOM[3'h5][25:24];
      `endif // RANDOMIZE_REG_INIT
      if (reset) begin
        level = 2'h3;
        af_level = 2'h3;
        s_pmp_check = 1'h1;
        s_mem_req = 1'h1;
        w_mem_resp = 1'h1;
        idle = 1'h1;
        mem_addr_update = 1'h0;
        s_bitmap_check = 1'h1;
        w_bitmap_resp = 1'h1;
        whether_need_bitmap_check = 1'h0;
        bitmap_checkfailed = 1'h0;
        way_info_REG = 1'h0;
      end
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL
      `FIRRTL_AFTER_INITIAL
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  assign io_req_ready = idle;
  assign io_resp_valid = resp_valid;
  assign io_resp_bits_resp_entry_tag = gpaddr[49:12];
  assign io_resp_bits_resp_entry_vmid = io_csr_hgatp_vmid[13:0];
  assign io_resp_bits_resp_entry_n =
    ~resp_gaf & pte_n & resp_pte_ppn[3:0] == 4'h8 & resp_entry_level == 2'h0;
  assign io_resp_bits_resp_entry_pbmt = resp_gaf ? 2'h0 : pte_pbmt;
  assign io_resp_bits_resp_entry_ppn = {2'h0, resp_pte_ppn};
  assign io_resp_bits_resp_entry_perm_d = ~resp_gaf & pte_perm_d;
  assign io_resp_bits_resp_entry_perm_a = ~resp_gaf & pte_perm_a;
  assign io_resp_bits_resp_entry_perm_g =
    ~resp_gaf & (jmp_bitmap_check ? cache_pte_perm_g : io_mem_resp_bits[5]);
  assign io_resp_bits_resp_entry_perm_u = ~resp_gaf & pte_perm_u;
  assign io_resp_bits_resp_entry_perm_x = ~resp_gaf & pte_perm_x;
  assign io_resp_bits_resp_entry_perm_w = ~resp_gaf & pte_perm_w;
  assign io_resp_bits_resp_entry_perm_r = ~resp_gaf & pte_perm_r;
  assign io_resp_bits_resp_entry_level = resp_entry_level;
  assign io_resp_bits_resp_gpf = pageFault & ~accessFault;
  assign io_resp_bits_resp_gaf = resp_gaf;
  assign io_resp_bits_id = {1'h0, id};
  assign io_mem_req_valid = io_mem_req_valid_0;
  assign io_mem_req_bits_addr = mem_addr;
  assign io_mem_req_bits_hptw_bypassed = bypassed;
  assign io_refill_req_info_vpn = gpaddr[49:12];
  assign io_refill_req_info_source = source;
  assign io_refill_level = level;
  assign io_pmp_req_bits_addr = mem_addr;
  assign io_bitmap_req_valid = ~s_bitmap_check;
  assign io_bitmap_req_bits_bmppn = pte_ppn;
  assign io_bitmap_req_bits_vpn = gpaddr[49:12];
  assign io_bitmap_req_bits_level =
    jmp_bitmap_check ? (fromSP ? cache_level : 2'h0) : level;
  assign io_bitmap_req_bits_way_info =
    jmp_bitmap_check ? cache_hitway : way_info_REG ? io_l0_way_info : way_info_r;
  assign io_bitmap_req_bits_hptw_bypassed = bypassed;
  assign io_bitmap_req_bits_n = pte_n;
  assign io_bitmap_resp_ready = ~w_bitmap_resp;
endmodule

